{
  "info": {
    "name": "Booking System API Tests",
    "description": "Comprehensive API test suite for the Booking System with 10+ tests covering all endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001",
      "type": "string"
    },
    {
      "key": "bookingId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Bookings",
      "item": [
        {
          "name": "1. Get All Bookings",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 500ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(500);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            },
            "description": "Retrieve all bookings from the system"
          },
          "response": []
        },
        {
          "name": "2. Create New Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Booking has an ID\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.collectionVariables.set(\"bookingId\", jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Booking has correct customer name\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.customerName).to.eql('John Doe');",
                  "});",
                  "",
                  "pm.test(\"Booking has correct service\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.service).to.eql('Haircut');",
                  "});",
                  "",
                  "pm.test(\"Booking has correct status\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('confirmed');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerName\": \"John Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"phone\": \"555-1234\",\n  \"service\": \"Haircut\",\n  \"date\": \"2025-12-15\",\n  \"time\": \"10:00\",\n  \"notes\": \"Regular haircut\",\n  \"status\": \"confirmed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            },
            "description": "Create a new booking"
          },
          "response": []
        },
        {
          "name": "3. Get Single Booking by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Booking has required fields\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('customerName');",
                  "    pm.expect(jsonData).to.have.property('email');",
                  "    pm.expect(jsonData).to.have.property('service');",
                  "    pm.expect(jsonData).to.have.property('date');",
                  "    pm.expect(jsonData).to.have.property('time');",
                  "});",
                  "",
                  "pm.test(\"Email format is valid\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.email).to.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "{{bookingId}}"]
            },
            "description": "Get a specific booking by ID"
          },
          "response": []
        },
        {
          "name": "4. Update Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Booking was updated\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.service).to.eql('Massage');",
                  "    pm.expect(jsonData.time).to.eql('14:00');",
                  "});",
                  "",
                  "pm.test(\"Response contains updated data\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerName\": \"John Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"phone\": \"555-1234\",\n  \"service\": \"Massage\",\n  \"date\": \"2025-12-15\",\n  \"time\": \"14:00\",\n  \"notes\": \"Changed to massage\",\n  \"status\": \"confirmed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "{{bookingId}}"]
            },
            "description": "Update an existing booking"
          },
          "response": []
        },
        {
          "name": "5. Delete Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is acceptable\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(500);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "{{bookingId}}"]
            },
            "description": "Delete a booking by ID"
          },
          "response": []
        },
        {
          "name": "6. Get Bookings After Delete",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Deleted booking not in list\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    const deletedId = pm.collectionVariables.get(\"bookingId\");",
                  "    const found = jsonData.some(booking => booking.id == deletedId);",
                  "    pm.expect(found).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            },
            "description": "Verify booking was deleted"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Services",
      "item": [
        {
          "name": "7. Get All Services",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Services array is not empty\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "    pm.expect(jsonData.length).to.be.greaterThan(0);",
                  "});",
                  "",
                  "pm.test(\"Each service has required fields\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    jsonData.forEach(service => {",
                  "        pm.expect(service).to.have.property('id');",
                  "        pm.expect(service).to.have.property('name');",
                  "        pm.expect(service).to.have.property('price');",
                  "        pm.expect(service).to.have.property('duration');",
                  "    });",
                  "});",
                  "",
                  "pm.test(\"Service prices are numbers\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    jsonData.forEach(service => {",
                  "        pm.expect(service.price).to.be.a('number');",
                  "        pm.expect(service.price).to.be.greaterThan(0);",
                  "    });",
                  "});",
                  "",
                  "pm.test(\"Contains expected services\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    const serviceNames = jsonData.map(s => s.name);",
                  "    pm.expect(serviceNames).to.include('Haircut');",
                  "    pm.expect(serviceNames).to.include('Massage');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/services",
              "host": ["{{baseUrl}}"],
              "path": ["services"]
            },
            "description": "Get all available services"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Time Slots",
      "item": [
        {
          "name": "8. Get All Time Slots",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Time slots array is not empty\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "    pm.expect(jsonData.length).to.be.greaterThan(0);",
                  "});",
                  "",
                  "pm.test(\"Time slots are in correct format\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    const timeRegex = /^\\d{2}:\\d{2}$/;",
                  "    jsonData.forEach(slot => {",
                  "        pm.expect(slot).to.match(timeRegex);",
                  "    });",
                  "});",
                  "",
                  "pm.test(\"Response time is acceptable\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(300);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/timeSlots",
              "host": ["{{baseUrl}}"],
              "path": ["timeSlots"]
            },
            "description": "Get all available time slots"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Validation Tests",
      "item": [
        {
          "name": "9. Create Booking with Missing Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Should still create with 201 (JSON Server behavior)\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response contains an ID\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "});",
                  "",
                  "// Clean up test data",
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"tempBookingId\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerName\": \"Test User\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            },
            "description": "Test creating booking with minimal data"
          },
          "response": []
        },
        {
          "name": "10. Get Non-Existent Booking",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response is an object\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings/999999",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "999999"]
            },
            "description": "Test getting a booking that doesn't exist"
          },
          "response": []
        },
        {
          "name": "11. Verify API Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"API is responding\", function () {",
                  "    pm.response.to.be.ok;",
                  "});",
                  "",
                  "pm.test(\"Response has JSON content type\", function () {",
                  "    pm.response.to.have.header('Content-Type');",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "",
                  "pm.test(\"Response time is fast\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            },
            "description": "Health check to verify API is running"
          },
          "response": []
        }
      ]
    }
  ]
}
